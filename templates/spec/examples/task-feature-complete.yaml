# Complete Feature Task Example
# This demonstrates a fully-populated FluidSpec task with all optional fields

task_id: T-2025-001
title: "Add user authentication with OAuth"
type: feature
status: planned
requires_operator_approval: true
iteration: 1
operator_feedback: ""

git_integration:
  enabled: true
  branch: dev
  commit_message_format: "<type>(task-<id>): <short description>"

owner: "dev-team-lead"
created_at: "2025-01-27"

summary: >
  Implement OAuth 2.0 authentication flow allowing users to log in with Google
  and GitHub providers. Include token management and session handling.

goal: >
  Users can authenticate using OAuth providers (Google, GitHub), with secure
  token storage, automatic session refresh, and proper error handling for
  failed authentication attempts.

background: >
  Current system uses basic username/password auth which has led to security
  concerns and user friction. OAuth will improve security and reduce password
  management burden for users.

inputs:
  - "Design mockups: https://figma.com/..."
  - "Security requirements doc: https://docs.internal/..."

aios_specs:
  core:
    - ".fluidspec/spec/base/constraints.md"
    - ".fluidspec/spec/base/conventions.md"
    - ".fluidspec/spec/base/README.md"
  extra:
    - ".fluidspec/spec/project/task-template.md"

project_specs:
  - ".fluidspec/spec/project/tech-stack.md"
  - ".fluidspec/spec/project/design-system.md"

constraints:
  - "No breaking changes to existing authentication endpoints"
  - "Must support existing session management system"
  - "OAuth tokens must be stored securely (encrypted at rest)"
  - "Must handle OAuth provider outages gracefully"
  - "All auth flows must be accessible (WCAG 2.1 AA)"

acceptance_criteria:
  - "Users can log in with Google OAuth 2.0"
  - "Users can log in with GitHub OAuth 2.0"
  - "Failed authentication shows clear, user-friendly error messages"
  - "Tokens are refreshed automatically before expiration"
  - "Session persists across browser sessions"
  - "All OAuth flows work on mobile and desktop"
  - "Security scan passes with no critical vulnerabilities"
  - "Unit tests achieve >90% coverage for auth module"
  - "Integration tests cover all OAuth flows"
  - "No regressions in existing auth functionality"

expected_outputs:
  - "OAuth configuration module"
  - "Frontend OAuth login components"
  - "Backend OAuth callback handlers"
  - "Token management service"
  - "Unit and integration tests"
  - "Updated API documentation"
  - "User-facing documentation"

risk_level: high

notes: >
  OAuth providers may change their APIs. Ensure fallback to email/password
  remains functional. Consider rate limiting on OAuth endpoints to prevent
  abuse. Test with actual OAuth provider sandbox environments before production
  deployment.

file_path: ".fluidspec/tasks/feature/001-20250127/add-oauth-authentication.yaml"
